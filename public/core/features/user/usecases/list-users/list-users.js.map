{"version":3,"file":"list-users.js","sources":["core/features/user/usecases/list-users/list-users.ts"],"sourceRoot":"/","sourcesContent":["import { inject } from 'inversify';\nimport Injectable from '../../../../utils/decorators/injectable';\nimport { IInternalUserDatasource } from '../../datasources/internal-datasource/types';\nimport {\n  IListUsersUsecase,\n  ListUsersCompleteResult,\n  ListUsersIncompleteResult,\n  ListUsersValidationError\n} from './types';\nimport { Left, Right } from '../../../../utils/types';\n\n@Injectable('IListUsersUsecase')\nexport default class ListUsersUsecase implements IListUsersUsecase {\n  constructor(\n    @inject('IInternalUserDatasource')\n    private readonly datasource: IInternalUserDatasource\n  ) { }\n\n  async execute(userIds: string[]) {\n    if (!userIds?.length) return new Left(new ListUsersValidationError());\n\n    const usersResult = await this.datasource.findManyByIds(userIds);\n    if (usersResult.isError) return usersResult;\n\n    const users = usersResult.success;\n    if (users.length < userIds.length) {\n      return new Right(new ListUsersIncompleteResult({\n        users,\n        usersNotFound: userIds.filter((userId) => !users\n          .find(({ id }) => id === userId))\n      }));\n    }\n\n    return new Right(new ListUsersCompleteResult(users));\n  }\n}\n"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;AAAA,yCAAmC;AACnC,yFAAiE;AAEjE,mCAKiB;AACjB,mDAAsD;AAGvC,IAAM,gBAAgB,GAAtB,MAAM,gBAAgB;IACnC,YAEmB,UAAmC;QAAnC,eAAU,GAAV,UAAU,CAAyB;IAClD,CAAC;IAEL,KAAK,CAAC,OAAO,CAAC,OAAiB;QAC7B,IAAI,CAAC,OAAO,EAAE,MAAM;YAAE,OAAO,IAAI,YAAI,CAAC,IAAI,gCAAwB,EAAE,CAAC,CAAC;QAEtE,MAAM,WAAW,GAAG,MAAM,IAAI,CAAC,UAAU,CAAC,aAAa,CAAC,OAAO,CAAC,CAAC;QACjE,IAAI,WAAW,CAAC,OAAO;YAAE,OAAO,WAAW,CAAC;QAE5C,MAAM,KAAK,GAAG,WAAW,CAAC,OAAO,CAAC;QAClC,IAAI,KAAK,CAAC,MAAM,GAAG,OAAO,CAAC,MAAM,EAAE,CAAC;YAClC,OAAO,IAAI,aAAK,CAAC,IAAI,iCAAyB,CAAC;gBAC7C,KAAK;gBACL,aAAa,EAAE,OAAO,CAAC,MAAM,CAAC,CAAC,MAAM,EAAE,EAAE,CAAC,CAAC,KAAK;qBAC7C,IAAI,CAAC,CAAC,EAAE,EAAE,EAAE,EAAE,EAAE,CAAC,EAAE,KAAK,MAAM,CAAC,CAAC;aACpC,CAAC,CAAC,CAAC;QACN,CAAC;QAED,OAAO,IAAI,aAAK,CAAC,IAAI,+BAAuB,CAAC,KAAK,CAAC,CAAC,CAAC;IACvD,CAAC;CACF,CAAA;AAvBoB,gBAAgB;IADpC,IAAA,oBAAU,EAAC,mBAAmB,CAAC;IAG3B,WAAA,IAAA,kBAAM,EAAC,yBAAyB,CAAC,CAAA;;GAFjB,gBAAgB,CAuBpC;kBAvBoB,gBAAgB","debug_id":"b94db150-6177-5e12-800b-cf6c2f4c6553"}