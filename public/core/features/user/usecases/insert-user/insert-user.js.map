{"version":3,"file":"insert-user.js","sources":["core/features/user/usecases/insert-user/insert-user.ts"],"sourceRoot":"/","sourcesContent":["import { inject } from 'inversify';\nimport Injectable from '../../../../utils/decorators/injectable';\nimport { Left } from '../../../../utils/types';\nimport { IInternalUserDatasource } from '../../datasources/internal-datasource/types';\nimport UserSchema, { UserSchemaProps } from '../../schemas/user-schema';\nimport { IInsertUserUsecase, InsertUserAlreadyExist } from './types';\n\n@Injectable('IInsertUserUsecase')\nexport default class InsertUserUsecase implements IInsertUserUsecase {\n  constructor(\n    @inject('IInternalUserDatasource')\n    private readonly userDatasource: IInternalUserDatasource\n  ) { }\n\n  async execute(user: Omit<UserSchemaProps, 'id'>) {\n    const existResult = await this.userDatasource.findByEmail(user.email);\n    if (existResult.isError) return existResult;\n    if (existResult.success) return new Left(new InsertUserAlreadyExist());\n\n    const userResult = await this.userDatasource.save(new UserSchema(user));\n    return userResult;\n  }\n}\n"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;AAAA,yCAAmC;AACnC,yFAAiE;AACjE,mDAA+C;AAE/C,4EAAwE;AACxE,mCAAqE;AAGtD,IAAM,iBAAiB,GAAvB,MAAM,iBAAiB;IACpC,YAEmB,cAAuC;QAAvC,mBAAc,GAAd,cAAc,CAAyB;IACtD,CAAC;IAEL,KAAK,CAAC,OAAO,CAAC,IAAiC;QAC7C,MAAM,WAAW,GAAG,MAAM,IAAI,CAAC,cAAc,CAAC,WAAW,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC;QACtE,IAAI,WAAW,CAAC,OAAO;YAAE,OAAO,WAAW,CAAC;QAC5C,IAAI,WAAW,CAAC,OAAO;YAAE,OAAO,IAAI,YAAI,CAAC,IAAI,8BAAsB,EAAE,CAAC,CAAC;QAEvE,MAAM,UAAU,GAAG,MAAM,IAAI,CAAC,cAAc,CAAC,IAAI,CAAC,IAAI,qBAAU,CAAC,IAAI,CAAC,CAAC,CAAC;QACxE,OAAO,UAAU,CAAC;IACpB,CAAC;CACF,CAAA;AAdoB,iBAAiB;IADrC,IAAA,oBAAU,EAAC,oBAAoB,CAAC;IAG5B,WAAA,IAAA,kBAAM,EAAC,yBAAyB,CAAC,CAAA;;GAFjB,iBAAiB,CAcrC;kBAdoB,iBAAiB","debug_id":"df2f7f23-d83a-533f-be1d-38a3923ca527"}