{"version":3,"file":"app.js","sources":["fastify/app.ts"],"sourceRoot":"/","sourcesContent":["import fastify from 'fastify';\nimport cors from '@fastify/cors';\nimport createRouter from './routes';\nimport { initDB } from '../core/utils/services/database-service';\nimport middie from '@fastify/middie';\nimport createApiAuthMiddleware from '../core/utils/middlewares/api-auth';\n\nconst createApp = async () => {\n  const app = fastify();\n  void app.register(cors);\n\n  await app.register(middie);\n  app.addHook('preHandler', createApiAuthMiddleware().execute);\n\n  await initDB();\n  createRouter(app);\n\n  return await app;\n}\n\nexport default createApp;\n"],"names":[],"mappings":";;;;;;;AAAA,sDAA8B;AAC9B,yDAAiC;AACjC,sDAAoC;AACpC,8EAAiE;AACjE,6DAAqC;AACrC,kFAAyE;AAEzE,MAAM,SAAS,GAAG,KAAK,IAAI,EAAE;IAC3B,MAAM,GAAG,GAAG,IAAA,iBAAO,GAAE,CAAC;IACtB,KAAK,GAAG,CAAC,QAAQ,CAAC,cAAI,CAAC,CAAC;IAExB,MAAM,GAAG,CAAC,QAAQ,CAAC,gBAAM,CAAC,CAAC;IAC3B,GAAG,CAAC,OAAO,CAAC,YAAY,EAAE,IAAA,kBAAuB,GAAE,CAAC,OAAO,CAAC,CAAC;IAE7D,MAAM,IAAA,yBAAM,GAAE,CAAC;IACf,IAAA,gBAAY,EAAC,GAAG,CAAC,CAAC;IAElB,OAAO,MAAM,GAAG,CAAC;AACnB,CAAC,CAAA;AAED,kBAAe,SAAS,CAAC","debug_id":"3c0a05af-68f0-593a-bbd2-0a93d651b92d"}